[TOC]
#  ğŸ“ŒWPF Tutorial
- åˆ›å»ºæ—¶é—´: 2024å¹´12æœˆ29æ—¥ 21:01
- Tag: Website
- [WPFä¸­æ–‡ç½‘](https://www.wpfsoft.com/)
- [æ·±å…¥æµ…å‡ºWPF](https://www.kdocs.cn/l/ckH3CD1T3Ugn)
- [pub_sams-teach-yourself-wpf-in-24-hours](https://www.kdocs.cn/l/cdAHEuHmTVJW)


## WPFä¸‹çš„MVVMæ¨¡å¼
![alt text](assets/WPF/image-41.png)
## XAML
1. Extensible Application Markup Language (XAML) æ‰©å±•åº”ç”¨ç¨‹åºæ ‡è®°è¯­è¨€;
2. XAML æ˜¯ WPF æŠ€æœ¯ä¸­ä¸“é—¨ç”¨äºè®¾è®¡ UI çš„è¯­è¨€ï¼› 
3. å®ç° ``é«˜å†…èšUI-ä½è€¦åˆé€»è¾‘`` ï¼›

## æ§ä»¶å’Œå¸ƒå±€
### æ§ä»¶çˆ¶ç±»
![alt text](assets/WPF/image-15.png)
- ``DispatcherObjectç±»``
DispatcherObjectæ˜¯åå°çº¿ç¨‹å’Œå‰å°çº¿ç¨‹çš„æ¶æµ·ç´«é‡‘æ¢ï¼Œè™½ç„¶æ‰€æœ‰çš„æ§ä»¶éƒ½å¿…é¡»åœ¨å‰å°UIçº¿ç¨‹ä¸­åˆ›å»ºï¼Œä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéš¾å…éœ€è¦åœ¨åå°çº¿ç¨‹ä¸­å»æ“ä½œæ§ä»¶ï¼Œäºæ˜¯Dispatcherè°ƒåº¦å‘˜æä¾›äº†Invokeå’ŒBeginInvokeä¸¤ä¸ªæ–¹æ³•ï¼Œä¾›æˆ‘ä»¬å¯ä»¥å®‰å…¨çš„è®¿é—®UIçº¿ç¨‹ä¸­çš„æ§ä»¶ã€‚
  ![alt text](assets/WPF/image-17.png)
- DependencyObjectç±»
  ![alt text](assets/WPF/image-18.png)
- Visualç±»
  Visualç±»æ˜¯WPFæ¡†æ¶ä¸­ç¬¬ä¸‰ä¸ªçˆ¶ç±»ï¼Œä¸»è¦æ˜¯ä¸º WPF ä¸­çš„å‘ˆç°æä¾›æ”¯æŒï¼Œå…¶ä¸­åŒ…æ‹¬å‘½ä¸­æµ‹è¯•ã€åæ ‡è½¬æ¢å’Œè¾¹ç•Œæ¡†è®¡ç®—ã€‚
  å®ƒä½äºç¨‹åºé›†:PresentationCore.dllåº“æ–‡ä»¶ä¸­ï¼Œå®ƒçš„å‘½åç©ºé—´æ˜¯System.Windows.Mediaã€‚
  ![alt text](assets/WPF/image-19.png)
  ![alt text](assets/WPF/image-20.png)
- UIElementç±» 
  UIElementç±»ç»§æ‰¿äº†Visualç±»ï¼Œåœ¨WPFæ¡†æ¶ä¸­æ’è¡Œè€å››ï¼ˆç¬¬4ä¸ªåŸºç±»ï¼‰ã€‚å®ƒä½äºç¨‹åºé›†:PresentationCore.dllä¹‹ä¸­ï¼Œå‘½åç©ºé—´:System.Windowsã€‚
  - è·¯ç”±äº‹ä»¶ Routed Events
    ![alt text](assets/WPF/image-21.png)
  - ä¾èµ–å±æ€§ Dependency Properties
    ![alt text](assets/WPF/image-22.png)
    ![alt text](assets/WPF/image-23.png)
- FrameworkElementç±»
    ![alt text](assets/WPF/image-24.png)

### æ§ä»¶çš„å†…å®¹æ¨¡å‹
![alt text](assets/WPF/image-43.png)
## Elements Tree
1. æ§ä»¶çš„å±‚çº§ç»“æ„æœ‰ä¸¤ç§ï¼šé€»è¾‘æ ‘ç»“æ„å’Œå¯è§†åŒ–æ ‘ç»“æ„ã€‚
2. ä¸¤ä¸ªæ ‘å®é™…ä¸Šåªæ˜¯æ„æˆ UI çš„åŒä¸€ç»„å¯¹è±¡çš„ä¸¤ä¸ªä¸åŒè§†å›¾ã€‚
### Logical Tree Structure  é€»è¾‘æ ‘ç»“æ„
1. Dependency properties ä¾èµ–å±æ€§ï¼›
2. Static and dynamic resources é™æ€å’ŒåŠ¨æ€èµ„æºï¼›
3. Binding object å¯¹è±¡ç»‘å®šï¼›
### Visual Tree Structure  å¯è§†åŒ–æ ‘ç»“æ„
1. å‘ˆç°è§†è§‰å¯¹è±¡ï¼Œæ¸²æŸ“å¸ƒå±€ï¼›
2. è·¯ç”±äº‹ä»¶ä¸»è¦æ²¿å¯è§†åŒ–æ ‘ï¼ˆè€Œä¸æ˜¯é€»è¾‘æ ‘ï¼‰ä¼ è¾“ï¼›

## æ•°æ®ç»‘å®š Binding
1. ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå…·å¤‡ä¸‰å±‚ç»“æ„ï¼Œåˆ†åˆ«ä¸º
- `æ•°æ®å­˜å‚¨å±‚`ï¼Œä½¿ç”¨æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿï¼›
- `æ•°æ®å¤„ç†å±‚`ï¼Œä½¿ç”¨ADO.NETç­‰æŠ€æœ¯ï¼›
- `æ•°æ®å±•ç¤ºå±‚`ï¼Œä½¿ç”¨WPFç±»åº“ï¼›
2. Bindingæ˜¯æ¡¥æ¢ï¼Œæ•°æ®ä»å“ªé‡Œæ¥å°±æ˜¯Sourceï¼Œæ•°æ®åˆ°å“ªé‡Œå»å°±æ˜¯Targetï¼›
3. Bindingçš„æ¨¡å‹ï¼›
   ![alt text](assets/WPF/image-28.png)
### å¦‚ä½•ä½¿ç”¨Binding
1. å¦‚ä½•å°†æ•°æ®æš´éœ²ç»™UIå¹¶é€šçŸ¥UIæ›´æ–°å‘¢?
   - é¦–å…ˆæ•°æ®æºçš„ç±»è¦å®ç°`INotifyPropertyChanged`æ¥å£ï¼›
   ![alt text](assets/WPF/image-25.png)
   ![alt text](assets/WPF/image-26.png)
   - åœ¨XAMLä¸­ï¼Œé€šè¿‡``{Binding Path=å±æ€§å}``çš„æ–¹å¼ç»‘å®šï¼›
   - åœ¨XAML.CSä¸­ï¼Œé€šè¿‡ä»£ç çš„æ–¹å¼ç»‘å®šï¼›
      ![alt text](assets/WPF/image-27.png)
   ```CSharp
   //ç®€åŒ–å†™æ³•
   this.textName.SetBinding(TextBox.TextProperty, new Binding("Name"))
   {
      Source = this.data, 
      Mode = BindingMode.TwoWay, 
      UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged
   };
   ```
2. ä½¿ç”¨Prismåº“ä¸­çš„`BindableBaseç±»`ç®€åŒ–æ•°æ®ç»‘å®šï¼›
![alt text](assets/WPF/code.png)

### Bindingçš„æº
1. æºæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡å±æ€§å…¬å¼€æ•°æ®ï¼Œå³å®ç°`INotifyPropertyChanged`æ¥å£çš„å¯¹è±¡ï¼›
2. æºä¸€èˆ¬æ˜¯æ•°æ®æºå¯¹è±¡ï¼Œä½†æ§ä»¶ä¹Ÿå¯ä»¥å……å½“æºï¼Œåªéœ€è¦`ElementName`æŒ‡å‘æ§ä»¶çš„åç§°å³å¯ï¼›
![alt text](assets/WPF/image-29.png)
3. å¦‚ä½•æŒ‡å®šæºï¼Ÿ
![alt text](assets/WPF/image-32.png)
![alt text](assets/WPF/image-34.png)
4. ä½¿ç”¨xmlæ•°æ®ä½œä¸ºæºæ—¶ï¼Œä½¿ç”¨XPathå±æ€§ï¼›
5. å½“UIéœ€è¦çš„å±æ€§æ²¡æœ‰è¢«æš´éœ²å‡ºæ¥ï¼Œå¯ä»¥ä½¿ç”¨`ObjectDataProvider`ä½œä¸ºæ•°æ®æº;
6. **RelativeSourceå±æ€§å¯ä»¥æŒ‡å®šç›¸å¯¹äºå½“å‰æ§ä»¶çš„æºå¯¹è±¡**ï¼›
![alt text](assets/WPF/image-42.png)
![alt text](assets/WPF/image-35.png)
### Bindingçš„Path
![alt text](assets/WPF/image-31.png)
### DataContext
>DataContextä½œä¸ºä¸€ä¸ªä¾èµ–å±æ€§ï¼Œå¯ä»¥æ²¿ç€UIæ ‘ä»æ ¹å‘ä¸Šä¼ é€’ï¼Œå¹¶è¢«æ‰€æœ‰å­æ§ä»¶ç»§æ‰¿ï¼›
![alt text](assets/WPF/image-33.png)
### Bindingçš„å››ç§æ¨¡å¼
- BindingMode.OneWayå•å‘ç»‘å®šï¼›
- BindingMode.TwoWayåŒå‘ç»‘å®šï¼›
- BindingMode.OneWayToSourceå•å‘åˆ°æºï¼›
- BindingMode.OneTimeä¸€æ¬¡ç»‘å®šï¼›

### Bindingdçš„å››ç§è§¦å‘æ–¹å¼
- UpdateSourceTrigger.Defaulté»˜è®¤è§¦å‘ï¼›
- UpdateSourceTrigger.PropertyChangedå±æ€§å€¼æ”¹å˜æ—¶è§¦å‘;
- UpdateSourceTrigger.Explicitæ˜¾å¼è§¦å‘;
- UpdateSourceTrigger.LostFocuså¤±å»ç„¦ç‚¹æ—¶è§¦å‘;
![alt text](assets/WPF/image-30.png)

### æ•°æ®éªŒè¯ Validation
1. åˆ›å»ºValidationRuleæŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»ï¼Œå®ç°Validateæ–¹æ³•ï¼›
è‹¥æ ¡éªŒé€šè¿‡ï¼Œåˆ™è¿”å›ValidationResult.ValidResult;
å¦åˆ™å°†ValidationResult.IsValid=falseï¼Œå¹¶è®¾ç½®ErrorContentå±æ€§ä¸ºé”™è¯¯ä¿¡æ¯ï¼›
![alt text](assets/WPF/image-36.png)

2. ä»€ä¹ˆæ—¶å€™ç¡®å®šæ ¡éªŒ
Bindingåªæœ‰åœ¨Target è¢«å¤–éƒ¨æ–¹æ³•æ›´æ–°æ—¶æ ¡éªŒæ•°æ®ï¼Œä¾‹å¦‚TextBoxæ§ä»¶çš„Textå±æ€§ç»‘å®šæ—¶ï¼Œåªæœ‰åœ¨ç”¨æˆ·è¾“å…¥å®Œæˆåå¤±å»ç„¦ç‚¹æ—¶æ‰ä¼šæ ¡éªŒæ•°æ®ï¼Œè¿™æ˜¯ä¸ºäº†æ ¡éªŒæ¥è‡ªTargetçš„æ•°æ®ï¼›
è‹¥æƒ³è¦æ ¡éªŒæ¥è‡ªSourceçš„æ•°æ®ï¼Œåˆ™éœ€è¦å°†æ ¡éªŒæ¡ä»¶çš„`ValidatesOnTargetUpdatad=True`;
![alt text](assets/WPF/image-38.png)

3. æ ¡éªŒå¤±è´¥çš„å¼‚å¸¸æ•è·
![alt text](assets/WPF/image-39.png)

### ç»‘å®šè½¬æ¢å™¨ IValueConverter
1. ç»‘å®šè½¬æ¢å™¨å¯ä»¥å°†ç»‘å®šçš„æ•°æ®è½¬æ¢æˆå¦ä¸€ç§æ ¼å¼ï¼Œä¾‹å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæšä¸¾ç±»å‹ï¼›
2. å®ç°`IValueConverter`æ¥å£çš„ç±»å¿…é¡»åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š`Convert`ï¼ˆSource to Targetï¼‰å’Œ`ConvertBack`(Target to Source)ï¼›
3. åœ¨XAMLä¸­ä½¿ç”¨Binding.Converterå±æ€§æŒ‡å®šç»‘å®šè½¬æ¢å™¨çš„å®ä¾‹ï¼›
4. ä½¿ç”¨ä»£ç æ–¹å¼ç»‘å®šæ—¶ï¼Œé€šè¿‡Converterå±æ€§è®¾ç½®ç»‘å®šè½¬æ¢å™¨ï¼›
5. ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```csharp
 public class GenderEnumToListConverter : IValueConverter
 {
     public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
     {
         // å¿½ç•¥ä¼ å…¥çš„å€¼ï¼Œç›´æ¥è¿”å›æšä¸¾å€¼çš„åˆ—è¡¨
         return Enum.GetValues(typeof(GenderEnum));
     }

     public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
     {
         // å°è¯•å°†é€‰ä¸­çš„å€¼è½¬æ¢å›GenderEnumæšä¸¾å€¼
         if (value is string enumString)
         {
             if (Enum.TryParse<GenderEnum>(enumString, out var enumValue))
             {
                 return enumValue;
             }
         }
         // å¦‚æœè½¬æ¢å¤±è´¥ï¼Œè¿”å›æšä¸¾çš„é»˜è®¤å€¼
         return GenderEnum.Unknown;
     }
 }
```

### MultiBinding å¤šè·¯ç»‘å®š
1. å¤šè·¯ç»‘å®šå¯ä»¥å°†å¤šä¸ªæ•°æ®æºåˆå¹¶ä¸ºä¸€ä¸ªå€¼ï¼›
2. ä½¿ç”¨`MultiBinding`å…ƒç´ ï¼Œå¹¶é€šè¿‡`Bindings`å­å…ƒç´ æŒ‡å®šæ¯ä¸ªç»‘å®šçš„è¯¦ç»†ä¿¡æ¯ï¼›
3. ä¾‹å¦‚éªŒè¯å¤šæ¬¡è¾“å…¥çš„å¯†ç æ˜¯å¦ä¸€è‡´ï¼›
   ![alt text](assets/WPF/image-40.png)


## ä¾èµ–å±æ€§ Dependency Property

### CLRå±æ€§
é¦–å…ˆä»‹ç»``CLRå±æ€§``ï¼›
1. C#è¯­è¨€è§„å®šï¼šå¯¹ç±»æœ‰æ„ä¹‰çš„å­—æ®µå’Œæ–¹æ³•ä½¿ç”¨Staticå…³é”®å­—ä¿®é¥°ï¼Œé€šè¿‡ç±»å+è®¿é—®æ“ä½œç¬¦å¯ä»¥è®¿é—®ï¼›å¯¹ç±»çš„å®ä¾‹æœ‰æ„ä¹‰çš„å­—æ®µå’Œæ–¹æ³•ä½¿ç”¨Non-Staticå…³é”®å­—ä¿®é¥°ï¼Œé€šè¿‡å®ä¾‹å¯¹è±¡+è®¿é—®æ“ä½œç¬¦å¯ä»¥è®¿é—®ï¼›
2. æ­¤æ—¶å­—æ®µåªåˆ†ä¸ºprivateå’Œpublicä¸¤ç±»ï¼Œæ²¡æœ‰å°è£…çš„æ¦‚å¿µï¼›è¿™ç§å°†å­—æ®µæš´éœ²ç»™å¤–éƒ¨çš„åšæ³•ï¼Œè¿èƒŒäº†å°è£…åŸåˆ™ï¼Œæ¯æ¬¡å†™å…¥éƒ½éœ€è¦åœ¨å¤–éƒ¨åˆ¤æ–­å­—æ®µçš„åˆç†æ€§ï¼›
![alt text](assets/WPF/image.png)
3. ç„¶åå¢åŠ äº†ä¸€å¯¹éprivateçš„Get/Setæ–¹æ³•ï¼Œå°è£…äº†å­—æ®µçš„è®¿é—®ï¼›ä½†æ˜¯æ¯ä¸ªå­—æ®µéƒ½éœ€è¦å†™ä¸€å¯¹æ–¹æ³•ï¼Œä»£ç æ¯”è¾ƒåˆ†æ•£ï¼›
![alt text](assets/WPF/image-1.png)
4. æœ€å .Net Frameworkæ¨å‡ºæ—¶ï¼Œå¾®è½¯å°†Get/Setæ–¹æ³•åˆå¹¶ä¸ºå±æ€§``Property``;
![alt text](assets/WPF/image-2.png)
### ä¾èµ–å±æ€§å¯ä»¥èŠ‚çœå†…å­˜å¼€é”€ï¼›
   ![alt text](assets/WPF/image-3.png)
   ![alt text](assets/WPF/image-4.png)
### å£°æ˜å’Œä½¿ç”¨ä¾èµ–å±æ€§
1. ä¾èµ–å±æ€§æ˜¯ç”± public static readonly DependencyProperty å®šä¹‰çš„å®ä¾‹å­—æ®µï¼›
2. ä¾èµ–å±æ€§çš„åŒ…è£…å™¨ï¼ˆWrapperï¼‰æ˜¯ä¸€ä¸ªCLRå±æ€§ï¼Œä½œç”¨æ˜¯ä»¥``å®ä¾‹å±æ€§``çš„å½¢å¼å‘å¤–ç•Œæš´éœ²ä¾èµ–å±æ€§ï¼Œè¿™æ ·ä¾èµ–å±æ€§æ‰èƒ½æˆä¸ºæ•°æ®æºçš„ä¸€ä¸ªPathï¼›
![alt text](assets/WPF/image-5.png)
![alt text](assets/WPF/image-6.png)
### ä¾èµ–å±æ€§å€¼å¦‚ä½•å­˜å–
1. è°ƒç”¨ä¾èµ–å¯¹è±¡çš„``SetValue``æ–¹æ³•æ—¶ï¼Œå€¼è¢«å­˜å‚¨åˆ°å“ªé‡Œï¼Ÿ
å› ä¸ºä¾èµ–å¯¹è±¡çš„ä¾èµ–å±æ€§æ˜¯ public static readonly ä¿®é¥°çš„ï¼Œæ‰€ä»¥å€¼ä¸å¯èƒ½ä¿å­˜åˆ°å®ä¾‹å¯¹è±¡ä¸­ï¼Œä¸ç„¶å‡ ç™¾ä¸ªå®ä¾‹éƒ½èµ‹å€¼æ—¶å°±ä¹±äº†ï¼›
2. ä»æºç å‘ç°ï¼ŒDependencyProperty.Register å®é™…ä¸Šæ˜¯å¯¹ DependencyProperty.RegisterCommonæ–¹æ³•çš„è°ƒç”¨ï¼›
![alt text](assets/WPF/image-7.png)
3. ä¸ºä»€ä¹ˆä½¿ç”¨ Static å’Œ Readonly ä¿®é¥°ä¾èµ–å±æ€§ï¼Ÿ
   ![alt text](assets/WPF/image-9.png)
4. GetValueçš„æ•°æ®æ¥æºï¼›
   ![alt text](assets/WPF/image-10.png)
5. SetValueæ–¹æ³•çš„æµç¨‹ï¼›
   ![alt text](assets/WPF/image-11.png)
6. Propdpçš„è®¾è®¡ç†å¿µ
   ![alt text](assets/WPF/image-12.png)
### é™„åŠ å±æ€§ Attached Property
1. é™„åŠ å±æ€§çš„å«ä¹‰
   é™„åŠ å±æ€§æ˜¯WPFä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ å°†ä¸€ä¸ªå±æ€§é™„åŠ åˆ°ä»»ä½•å…ƒç´ ä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯è¯¥å…ƒç´ çš„ç±»å‹å®šä¹‰çš„å±æ€§ã€‚è¿™ä½¿å¾—å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå§‹ç±»çš„æƒ…å†µä¸‹æ‰©å±•å…¶åŠŸèƒ½ï¼›
2. å¦‚ä½•å£°æ˜
   ![alt text](assets/WPF/image-13.png)
3. å¦‚ä½•ä½¿ç”¨
   ![alt text](assets/WPF/image-14.png)


## äº‹ä»¶
1. `CLRç›´æ¥äº‹ä»¶æ¨¡å‹`ä¸­ï¼Œäº‹ä»¶çš„æ‹¥æœ‰è€…å°±æ˜¯æ¶ˆæ¯çš„å‘é€è€…ï¼ˆsenderï¼‰;
   ![alt text](assets/WPF/image-44.png)
### WPFå†…ç½®è·¯ç”±äº‹ä»¶
![alt text](assets/WPF/image-45.png)
1. æ·»åŠ ä¾¦å¬å™¨ï¼›
æ‰€æœ‰`UIElement`éƒ½å…·å¤‡`AddHandler`æ–¹æ³•;
2. æŸ¥çœ‹äº‹ä»¶çš„æºå¤´ï¼›
```csharp
private void Button_Click(object sender, RoutedEventArgs e)
{
   MessageBox.Show((e.OriginalSource as FrameworkElement).Name);
}

```   
### è‡ªå®šä¹‰è·¯ç”±äº‹ä»¶
1. æ ‡å‡†å®ç°ï¼›
   ![alt text](assets/WPF/image-46.png)
2. å¦‚ä½•æ³¨å†Œè·¯ç”±äº‹ä»¶;
   ![alt text](assets/WPF/image-47.png)
3. é˜»æ­¢è·¯ç”±äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ï¼›
   e.Handled = true;

### RoutedEventArgs çš„ Source å’Œ OriginalSource
1. RoutedEventArgså…·å¤‡ä¸¤ä¸ªå±æ€§ï¼šSourceå’ŒOriginalSource;
2. Source è¡¨ç¤º LogicTree ä¸­çš„äº‹ä»¶æº;
3. OrignalSource è¡¨ç¤º VisualTree ä¸­çš„äº‹ä»¶æº;

### é™„åŠ äº‹ä»¶
1. è·¯ç”±äº‹ä»¶çš„å®¿ä¸»éƒ½æ˜¯æ‹¥æœ‰å¯è§†åŒ–å®ä½“çš„ç•Œé¢å…ƒç´ ï¼Œé™„åŠ äº‹ä»¶åˆ™å¯ä»¥é™„åŠ åˆ°ä»»ä½•å¯¹è±¡ä¸Šï¼›
2. ç”±äºåªæœ‰UIElementæ‰æ‹¥æœ‰æ·»åŠ è·¯ç”±äº‹ä»¶ã€åˆ é™¤è·¯ç”±äº‹ä»¶ã€è§¦å‘è·¯ç”±äº‹ä»¶çš„èƒ½åŠ›ï¼Œæ‰€ä»¥é™„åŠ äº‹ä»¶çš„å®¿ä¸»åªèƒ½æ˜¯UIElementçš„æ´¾ç”Ÿç±»ï¼›
![alt text](assets/WPF/image-48.png)


## å‘½ä»¤ Command
1. å‘½ä»¤ç›¸å¯¹äºäº‹ä»¶ï¼Œå…·å¤‡çº¦æŸæ€§å’Œé¡ºåºæ‰§è¡Œæ€§ï¼›
2. CommandBindingä¸€å®šè¦è®¾ç½®åœ¨å‘½ä»¤ç›®æ ‡çš„å¤–å›´æ§ä»¶ä¸Šï¼Œä¸ç„¶æ— æ³•æ•æ‰åˆ°å§CanExecuteå’ŒExecuteäº‹ä»¶ï¼›
3. RoutedCommandä¸ä¸šåŠ¡é€»è¾‘æ— å…³ï¼Œä¸šåŠ¡é€»è¾‘è¦ä¾é å¤–å›´çš„CommandBindingå®ç°ï¼›
### æ„æˆå…ƒç´ 
![alt text](assets/WPF/image-49.png)
### ICommandæ¥å£
![alt text](assets/WPF/image-52.png)
### é¢„å®šä¹‰å‘½ä»¤äºå‘½ä»¤å‚æ•°
![alt text](assets/WPF/image-51.png)


## èµ„æº
1. WPFçš„æ¯ä¸ªç•Œé¢å…ƒç´ éƒ½å…·å¤‡ä¸€ä¸ªResourceå±æ€§ï¼›
2. åœ¨æ£€ç´¢èµ„æºæ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾æ§ä»¶è‡ªå·±çš„Reousrce,ç„¶åæ²¿ç€é€»è¾‘æ ‘å‘ä¸ŠæŸ¥æ‰¾ï¼›
   è‹¥æœ€é¡¶å±‚çš„å®¹å™¨éƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™æŸ¥æ‰¾Application Resources;
   å¦åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼›
### é™æ€èµ„æºä¸åŠ¨æ€èµ„æº
1. é™æ€èµ„æºåœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šï¼Œä¸ä¼šéšæ•°æ®å˜åŒ–è€Œæ”¹å˜ï¼›
2. åŠ¨æ€èµ„æºåœ¨è¿è¡Œæ—¶ç»‘å®šåˆ°æ•°æ®æºä¸Šï¼Œä¼šéšç€æ•°æ®çš„æ”¹å˜è€Œæ”¹å˜ï¼›
3. å¦‚ä½•åŒºåˆ†ï¼Ÿ
   - é™æ€èµ„æºä½¿ç”¨``{StaticResource}``æ ‡è®°æ‰©å±•è¯­æ³•;
   - åŠ¨æ€èµ„æºä½¿ç”¨``{DynamicResource}``æ ‡è®°æ‰©å±•è¯­æ³•;
4. èµ„æºå­—å…¸ä¸­çš„èµ„æºæˆä¸ºWPFï¼Œç¨‹åºçš„å†…åµŒèµ„æºç§°ä¸ºç¨‹åºé›†èµ„æºï¼›
5. ç¨‹åºçš„å†…åµŒèµ„æºæ–‡ä»¶Resouces.resxï¼Œå¿…é¡»ä¿®æ”¹è®¿é—®çº§åˆ«ä¸ºPublic;
   å¥½å¤„æ˜¯ä¾¿äºç¨‹åºçš„å›½é™…åŒ–ï¼Œä¿®æ”¹ç•Œé¢è¯­è¨€åªéœ€è¦é‡æ–°å†™ä¸€ä¸ªResouces.resxæ–‡ä»¶å³å¯ï¼›
   ![alt text](assets/WPF/image-53.png)
6. ä½¿ç”¨Pack URIæ ‡è®°æ‰©å±•è¯­æ³•è®¿é—®ç¨‹åºé›†èµ„æºï¼›
   ![alt text](assets/WPF/image-54.png)
7. å‡ ç§èµ„æºçš„å®šä¹‰æ–¹å¼ï¼›
   ![alt text](assets/WPF/image-55.png)
   1. ç›´æ¥åœ¨XAMLä¸­å®šä¹‰ï¼›
   2. å®šä¹‰åœ¨èµ„æºå­—å…¸ä¸­ï¼›
   3. å®šä¹‰åœ¨å•ç‹¬æ–‡ä»¶ä¸­ï¼›

## æ¨¡æ¿
1. æ§ä»¶çš„â€œç®—æ³•å†…å®¹â€ï¼šæŒ‡æ§ä»¶èƒ½å±•ç°é‚£äº›æ•°æ®ï¼Œå…·æœ‰å“ªäº›æ–¹æ³•ï¼Œèƒ½å“åº”é‚£äº›æ“ä½œï¼›
2. æ§ä»¶çš„â€œæ•°æ®å†…å®¹â€ï¼šæŒ‡æ§ä»¶æ‰€å±•ç¤ºçš„å…·ä½“æ•°æ®æ˜¯ä»€ä¹ˆï¼›
![alt text](assets/WPF/image-56.png)
### DataTemplate ä¸ ControlTemplate
![alt text](assets/WPF/image-57.png)


### Style
1. Setter
   ![alt text](assets/WPF/image-58.png)
### Trigger
1. åŸºæœ¬Triggerï¼›
   ![alt text](assets/WPF/image-59.png)
2. MultiTrigger
   ![alt text](assets/WPF/image-60.png)
3. DataTrigger
   ![alt text](assets/WPF/image-61.png)
4. MultiDataTrigger
   ![alt text](assets/WPF/image-62.png)
5. EventTrigger
   ![alt text](assets/WPF/image-63.png)

## ç»˜å›¾å’ŒåŠ¨ç”»
### è·¯å¾„
![alt text](assets/WPF/image-64.png)

### åŠ¨ç”»
![alt text](assets/WPF/image-65.png)

## å¤šçº¿ç¨‹
![alt text](assets/WPF/image-66.png)
### Dispather
1. Dispatcheræ˜¯WPFçš„çº¿ç¨‹è°ƒåº¦å™¨ï¼Œè´Ÿè´£å°†UIæ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼›
![alt text](assets/WPF/image-67.png)
2. Dispather.BeginInvoke
![alt text](assets/WPF/image-68.png)
3. ä½¿ç”¨Invokeå’ŒBeginInvokeçš„é‡ç‚¹
![alt text](assets/WPF/image-69.png)

### BackgroundWorker
1. åœ¨xamlä¸­å®šä¹‰BackgroundWorker;
![alt text](assets/WPF/image-70.png)
2. å…³è”å“åº”äº‹ä»¶/åœ¨ä»£ç ä¸­æå–BackgroundWorkerå®ä¾‹ï¼›
![alt text](assets/WPF/image-71.png)
3. BackgroundWorker.`RunWorkerAsync`(è¾“å…¥)ï¼›
![alt text](assets/WPF/image-72.png)
4. BackgroundWorker_DoWork(object sender, DoWorkEventArgs e);
`DoWorkEventArgs.Argumentä¸Result`
![alt text](assets/WPF/image-73.png)
5. `RunWorkerCompleted`(object sender, RunWorkerCompletedEventArgs e);
![alt text](assets/WPF/image-74.png)
6. è·Ÿè¸ªè¿›åº¦
![alt text](assets/WPF/image-75.png)
7. å–æ¶ˆä»»åŠ¡
![alt text](assets/WPF/image-76.png)
![alt text](assets/WPF/image-77.png)
![alt text](assets/WPF/image-78.png)